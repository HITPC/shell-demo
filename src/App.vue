<script setup>
  import { ref, onMounted } from 'vue';
  import setTheme from './tools/setTheme'
  import getRandomString from './tools/getRandomString'
  import formatString from './tools/formatString'
  // åˆå§‹åŒ–è‡ªåŠ¨é…ç½®ä¸»é¢˜
  onMounted(()=>{
    let localTheme = localStorage.getItem('theme')
    if(!localTheme){
      localTheme.setItem('theme', 'light')
      localTheme = 'light'
    }
    setTheme(localTheme);
  }); 
  function changeTheme(){
    let localTheme = localStorage.getItem('theme')
    if(localTheme === 'light'){
      localStorage.setItem('theme', 'dark')
      setTheme('dark')
    }else{
      localStorage.setItem('theme', 'light')
      setTheme('light')
    }
  }

  // è‚¯å®šæ˜¯éå†ä¸€ä¸ªæ•°ç»„
  // éœ€è¦æœ‰ï¼šå›è½¦åè‡ªåŠ¨æ»šåŠ¨åˆ°å®¹å™¨åº•éƒ¨ï¼Œä¸Šä¸‹é”®åˆ‡æ¢å·²è¾“å…¥çš„æŒ‡ä»¤ï¼Œv-forç”Ÿæˆè¾“å‡ºåˆ—è¡¨
  // è®¾è®¡æ€è·¯ï¼šä¸‰ç§æƒ…å†µå§ï¼Œinfoï¼šæ‰“å°å‡ºæ¥çš„å†…å®¹ï¼Œinputï¼šè¾“å…¥æ¡†ï¼Œstatic-inputï¼šå·²ç»æ‰§è¡Œäº†çš„å‘½ä»¤
  const shellItems = ref([
    {
      id: getRandomString(),
      type: 'info',
      // æ¨¡æ¿å­—ç¬¦ä¸²éœ€è¦å¤„ç†ä¸€ä¸‹æ‰èƒ½å¸¦ç€æ¢è¡Œå±•ç¤ºåˆ°é¡µé¢ä¸Š
      // ä½†æ˜¯ä¹‹å‰æˆ‘é‚£ä¿©ï¼Œä¸€ä¸ªæ˜¯alerté‡Œï¼Œä¸€ä¸ªæ˜¯mdç¼–è¾‘å™¨é‡Œï¼Œå¥½åƒéƒ½å¯ä»¥ç›´æ¥å±•ç¤ºï¼Œåº”è¯¥æ˜¯å’Œè¾“å‡ºç¯å¢ƒæ˜¯æœ‰å…³ç³»çš„ã€‚
      value: `Hi there!ğŸ™‚ Welcome to use this shell! Input commands belowğŸ‘‡ to use this! 
      If you don't know what commands you can use, please type [help] then type [Enter] to view the command list! 
      ğŸ› Build with Vue3 & Vite. 
      `
    },
    // ä½†æ˜¯è¿™é‡Œçš„é—®é¢˜æœ‰ç‚¹å¤§ï¼Œå¥½åƒä¸€ä¸ªInputæ˜¯è¡Œä¸é€šçš„ï¼Œå¯èƒ½éœ€è¦å¤šä¸ªï¼Œç„¶åé€šè¿‡ç©ºæ ¼æ¥ä»€ä¹ˆåˆ‡ä¸€ä¸‹
    {
      id: getRandomString(),
      type: 'input',
      value: ""
    },
  ]);

  // å®ç°æ€è·¯ï¼Œç›‘å¬é”®ç›˜è¾“å…¥ï¼Œåˆ¤æ–­è¾“å…¥è¿›æ¥çš„é”®ï¼Œå£°æ˜ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œå­˜å‚¨å½“å‰çŠ¶æ€ï¼ˆæ˜¯ä¸æ˜¯typeäº†ç©ºæ ¼ä»€ä¹ˆçš„ï¼‰ï¼Œå¦‚æœæ˜¯ç©ºæ ¼ï¼Œé‚£ä¹ˆè§¦å‘ä¸€ä¸‹ä»€ä¹ˆï¼Œç›‘å¬é€€æ ¼é”®ä»€ä¹ˆçš„ï¼Œæˆ–è€…ç”¨splitä¸€ä¸‹ç©ºæ ¼çœ‹æ•°ç»„é•¿åº¦ï¼Œåˆ¤æ–­å½“å‰è¾“å…¥ã€‚
  // ç›´æ¥å¡åˆ°ä¸€ä¸ªæ•°æ®å¯¹è±¡(å¯èƒ½éœ€è¦æ˜¯ä¸ªæ•°ç»„ï¼Œå› ä¸ºè¿˜è¦æ¶‰åŠåˆ°ä¸Šä¸‹ç®­å¤´æŒ‡ä»¤è®°å½•çš„é—®é¢˜)é‡Œï¼Œæ•°æ®å¯¹è±¡åˆ†å¥½å¤´ï¼Œä¿®é¥°ç¬¦ä»€ä¹ˆçš„ï¼Œç„¶åæ ¹æ®çŠ¶æ€å¯¹è±¡çš„çŠ¶æ€æ¥åˆ¤å®šä¸€ä¸‹å½“å‰çš„è¾“å…¥ï¼Œæ¥åŠ¨æ€çš„ç»™ä¸Šæ ·å¼ã€‚å¯èƒ½éœ€è¦è¾“å…¥å¥½çš„æ•°å€¼åŠ¨æ€çš„æ’å…¥åˆ°inputå‰é¢ã€‚åŠ¨æ€æ”¹inputé‡Œé¢çš„æ–‡å­—é¢œè‰²å³å¯

  // é‚£ä¹ˆï¼Œéƒ½æœ‰ä»€ä¹ˆçŠ¶æ€å‘¢ï¼Ÿ


</script>

<template>
  <div class="shell-main-container">
    <div 
      class="shell-main-item" 
      v-for="item in shellItems"
      :key="item.id"
    >
      <div class="shell-main-left-arrow cmd-symbol-part-text">></div>
      <span v-if="item.type === 'info'" v-html="formatString(item.value)"></span>
      <span v-else-if="item.type === 'static-input'"></span>

      <input 
        v-else-if="item.type === 'input'" 
        type="text" 
        class="shell-input cmd-main-part-text" 
        autofocus
      />
      <span v-else class="cmd-error-part-text">Unknow Shell Type</span>
    </div>
  </div>
</template>

<style scoped>

  /* æ•´ä½“ç»ˆç«¯æ¡† */
  .shell-main-container{
    width: 100%;
    height: 100%;
    overflow: auto;
    /* å‚»äº†å§å”§çš„ï¼Œmarginä¹Ÿä¸ä¼šè¢«borderBoxç®—åˆ°å®½é«˜é‡Œå•Šï¼Œäººç®—çš„æ˜¯paddingå’Œborder */
    padding: 1vw;
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    align-content: flex-start;
  }

  /* æƒ³æ”¹ä¸€ä¸‹é€‰ä¸­é¢œè‰²æ¥ç€ï¼Œä¸é¡¶ç”¨å•Š */
  /* .shell-main-item span::selection, 
  .shell-main-item span::-moz-selection, 
  .shell-main-item span::-webkit-selection{
    background-color: rgba(62, 139, 254, 0.6);
  } */

  /* å‘½ä»¤å¤´æ–‡å­—éƒ¨åˆ†çš„æ ·å¼ */
  .cmd-head-part-text{
    color: var(--cmd-head-font-color);
  }

  .cmd-main-part-text{
    color: var(--main-font-color);
  }

  /* å‘½ä»¤ä¿®é¥°æ–‡å­—éƒ¨åˆ†çš„æ ·å¼ */
  .cmd-decoration-part-text{
    color: var(--cmd-decoration-font-color);
  }

  /* å‘½ä»¤é‚£å‡ ä¸ªç¬¦å·æ–‡å­—åé¢çš„æ ·å¼ */
  .cmd-symbol-part-text{
    color: var(--cmd-symbol-font-color);
  }

  /* é”™è¯¯å‡ºç°æ—¶çš„é¢œè‰² */
  .cmd-error-part-text{
    color: var(--cmd-error-font-color);
  }

  /* æ¯ä¸€é¡¹shell */
  .shell-main-item{
    width: 100%;
    display: flex;
    justify-content: flex-start;
    align-items: flex-start;
    margin-bottom: 5px;
  }

  .shell-main-left-arrow{
    padding-top: 3px;
    margin-right: 1%;
    user-select: none;
  }

  .shell-input{
    border: none;
    outline: none;
    padding-top: 3px;
    width: 100%;
    font-size: 14px;
    font-weight: 500;
    font-family: 'Cascadia Code SemiBold', 'Trebuchet MS', 'Gill Sans', 'Gill Sans MT', Calibri, sans-serif;
    background-color: transparent;
  }
</style>
